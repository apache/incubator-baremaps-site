(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{553:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/developer-manual/layer-simplification",function(){return l(937)}])},937:function(e,s,l){"use strict";l.r(s);var r=l(5893),o=l(4319),n=l(1151);function i(e){let s=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",code:"code",h2:"h2",h3:"h3",pre:"pre",span:"span",blockquote:"blockquote"},(0,n.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Layer Simplification"}),"\n",(0,r.jsx)(s.p,{children:"In order to optimize the size of tiles at each zoom level, simplifications are made onto the vector layers. It is usually setup in two files:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"prepare.sql"})," contains the SQL queries to simplify the data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"simplify.sql"})," contains the SQL queries for creating the materialized views for each zoom level"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"example-landuse",children:"Example: Landuse"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"st_buffer"})," is used to simplify the geometries. The different buffer sizes are defined in the ",(0,r.jsx)(s.code,{children:"prepare.sql"})," file."]}),"\n",(0,r.jsx)(s.p,{children:"The following example shows the queries to simplify the landuse layer for the zoom level 7:"}),"\n",(0,r.jsx)(s.h3,{id:"1-create-the-positive-buffer",children:"1. Create the positive buffer"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_l_filtered "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id,"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    tags "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'landuse'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" landuse,"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    st_buffer(st_simplifypreservetopology(geom, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"6"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")), "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"7"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"), "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'join=mitre'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" st_area(st_envelope(geom)) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"7"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"), "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"There are two main parameters to adjust:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"st_simplifypreservetopology"})," tolerance."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"The tolerance is ajusted to one zoom level below the target zoom level. This is to avoid having too many geometries at the target zoom level and allows to better merge them together."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"st_area"})," condition."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:'The condition is used to filter out geometries that are too small. Lowering the value will increase the number of geometries and more will be merged together. Increasing the value will decrease the number of geometries and make the layer less "dense".'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"2-group-the-geometries",children:"2. Group the geometries"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_l_grouped "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    landuse,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    cluster,"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    st_collect(geom) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse_l_clustered"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" landuse, cluster;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"The geometries are grouped by landuse and cluster."}),"\n",(0,r.jsx)(s.h3,{id:"3-create-the-negative-buffer",children:"3. Create the negative buffer"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_l_buffered "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    landuse,"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    st_buffer(geom, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"7"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"), "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'join=mitre'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse_l_grouped;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"Here the buffer is created with a negative value to merge the geometries together."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"st_buffer"})," buffer size."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"The negative value is used to merge the geometries together. A smaller factor will merge more geometries together and vice versa. However, the greater the difference between the positive and negative buffer, the more likely it is to have artifacts."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"4-explode-the-geometries",children:"4. Explode the geometries"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_l_exploded "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    landuse,"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    (st_dump(geom)).geom "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse_l_buffered;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"The geometries are exploded to be able to merge them with the positive buffer."}),"\n",(0,r.jsx)(s.h3,{id:"5-build-the-final-layer",children:"5. Build the final layer"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_l "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"row_number"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"OVER"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" id,"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    jsonb_build_object("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'landuse'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", landuse) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tags,"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    geom "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse_l_buffered;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"The final layer is created by reconstructing the geometries and adding the landuse tag."}),"\n",(0,r.jsx)(s.h3,{id:"6-use-the-layer",children:"6. Use the layer"}),"\n",(0,r.jsxs)(s.p,{children:["We now use the ",(0,r.jsx)(s.code,{children:"osm_landuse_l"})," layer for the zoom level 7 in ",(0,r.jsx)(s.code,{children:"simplify.sql"}),". Note that we apply further simplifications to the layer to reduce the size of the tiles."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MATERIALIZED VIEW osm_landuse_z7 "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id,"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    tags,"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    st_simplifypreservetopology(geom, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"7"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geom"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" osm_landuse_l"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" st_area(st_envelope(geom)) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"150"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"78270"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"power"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"7"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"), "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]})]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"st_area"})," condition."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["The condition is used again to filter out geometries that are too small from the merged geometries (",(0,r.jsx)(s.code,{children:"osm_landuse_l"}),"). The factor can be adjusted to increase or decrease the filtering."]}),"\n"]}),"\n"]}),"\n"]})]})}l(5675),s.default=(0,o.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,n.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(i,{...e})}):i(e)},pageOpts:{filePath:"src/pages/documentation/developer-manual/layer-simplification.mdx",route:"/documentation/developer-manual/layer-simplification",headings:[{depth:1,value:"Layer Simplification",id:"layer-simplification"},{depth:2,value:"Example: Landuse",id:"example-landuse"},{depth:3,value:"1. Create the positive buffer",id:"1-create-the-positive-buffer"},{depth:3,value:"2. Group the geometries",id:"2-group-the-geometries"},{depth:3,value:"3. Create the negative buffer",id:"3-create-the-negative-buffer"},{depth:3,value:"4. Explode the geometries",id:"4-explode-the-geometries"},{depth:3,value:"5. Build the final layer",id:"5-build-the-final-layer"},{depth:3,value:"6. Use the layer",id:"6-use-the-layer"}],title:"Layer Simplification"},pageNextRoute:"/documentation/developer-manual/layer-simplification"})}},function(e){e.O(0,[319,774,888,179],function(){return e(e.s=553)}),_N_E=e.O()}]);