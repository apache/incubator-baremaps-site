(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{4803:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/getting-started",function(){return t(4034)}])},4034:function(e,s,t){"use strict";t.r(s);var a=t(5893),n=t(4319),r=t(1151);t(5675);var i=t(4673);function l(e){let s=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",pre:"pre",code:"code",span:"span",ul:"ul",li:"li"},(0,r.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{children:"Getting started"}),"\n",(0,a.jsxs)(s.p,{children:["Apache Baremaps comes with a ",(0,a.jsx)(s.a,{href:"https://baremaps.apache.org/documentation/basemap/",children:"default schema and style"})," similar to ",(0,a.jsx)(s.a,{href:"https://github.com/gravitystorm/openstreetmap-carto",children:"OpenStreetMap Carto"}),".\nThis is a great starting point to get familiar with the project and to build your own basemap."]}),"\n",(0,a.jsxs)(s.p,{children:["We chose the ",(0,a.jsx)(s.a,{href:"https://github.com/apache/incubator-baremaps/blob/main/LICENSE",children:"Apache License"})," so that map vendors can create derived work without attributing the Apache Baremaps project on the map.\nThe only requirement is to give proper credit to the wonderful contributors behind the data sources, such as ",(0,a.jsx)(s.a,{href:"https://www.openstreetmap.org/",children:"OpenStreetMap"})," or ",(0,a.jsx)(s.a,{href:"https://www.naturalearthdata.com/",children:"Natural Earth"}),".\nNotice that this schema and style are now used by default to display vector maps on the ",(0,a.jsx)(s.a,{href:"https://wiki.openstreetmap.org/wiki/Template:Vector_map",children:"OpenStreetMap wiki"}),"."]}),"\n",(0,a.jsx)(s.p,{children:"While the quality of the schema and style keeps improving, contributions, improvements, and feedback are welcome and encouraged."}),"\n","\n",(0,a.jsx)("div",{style:{marginTop:20,height:450},children:(0,a.jsx)(i.Z,{})}),"\n",(0,a.jsx)(s.h2,{id:"installing-postgis",children:"Installing PostGIS"}),"\n",(0,a.jsx)(s.p,{children:"This step is not required if you plan to execute the Geocoding or IP to location examples."}),"\n",(0,a.jsxs)(s.p,{children:["For the insertion and generation of Vector tiles, you need to set up a ",(0,a.jsx)(s.a,{href:"https://postgis.net/",children:"PostGIS"})," database.\nThis database will host all the data required to generate the vector tiles."]}),"\n",(0,a.jsx)(s.p,{children:"The following docker image will allow you to jump start this installation:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"docker run \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --name baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --publish 5432:5432 \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_DB=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_USER=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_PASSWORD=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -d postgis/postgis:latest"})})]})}),"\n",(0,a.jsx)(s.p,{children:"On a mac, you may prefer an image optimized for arm64:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"docker run \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --name baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --publish 5432:5432 \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_DB=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_USER=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -e POSTGRES_PASSWORD=baremaps \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -d kartoza/postgis:16-3.4"})})]})}),"\n",(0,a.jsx)(s.p,{children:"You can then stop and start the container with the following commands:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"docker stop baremaps"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"docker start baremaps"})})]})}),"\n",(0,a.jsx)(s.h2,{id:"installing-the-cli",children:"Installing the CLI"}),"\n",(0,a.jsxs)(s.p,{children:["In order to run Apache Baremaps, you first need to install Java 17 or a later version.\n",(0,a.jsx)(s.a,{href:"https://sdkman.io/",children:"SDKMAN"})," provides a convenient Command Line Interface (CLI) to install and upgrade Java."]}),"\n",(0,a.jsxs)(s.p,{children:["To install Apache Baremaps, download and decompress the latest ",(0,a.jsx)(s.a,{href:"https://dist.apache.org/repos/dist/release/incubator/baremaps/",children:"binary distribution"}),".\nThen, add the ",(0,a.jsx)(s.code,{children:"/bin"})," directory of the decompressed distribution to your ",(0,a.jsx)(s.code,{children:"PATH"})," environment variable:"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"tar -xzf baremaps-<version>-incubating-bin.tar.gz"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"export PATH=$PATH:`pwd`/baremaps/bin"})})]})}),"\n",(0,a.jsxs)(s.p,{children:["Calling the ",(0,a.jsx)(s.code,{children:"baremaps"})," command should now result in an output similar to the following:"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Usage: baremaps [-V] [COMMAND]"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"A toolkit for producing vector tiles."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -V, --version   Print version info."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Commands:"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  workflow  Manage a workflow."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  database  Database commands."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  map       Map commands."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  geocoder  Geocoder commands (experimental)."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  iploc     IP to location commands (experimental)."})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ogcapi    OGC API server (experimental)."})})]})}),"\n",(0,a.jsxs)(s.p,{children:["From here, heads to ",(0,a.jsx)(s.a,{href:"/documentation/getting-started/installing-postgis/",children:"Installing PostGIS"})," if you plan to work with vector tiles."]}),"\n",(0,a.jsxs)(s.p,{children:["If you want to work on ",(0,a.jsx)(s.a,{href:"/documentation/additional-examples/geocoding/",children:"Geocoding"})," or ",(0,a.jsx)(s.a,{href:"/documentation/additional-examples/ip-to-location/",children:"IP to location"}),", head directly into the related examples."]}),"\n",(0,a.jsx)(s.h2,{id:"preparing-the-database",children:"Preparing the database"}),"\n",(0,a.jsxs)(s.p,{children:["In order to build the basemap locally, move to the ",(0,a.jsx)(s.code,{children:"basemap"})," directory at root of the project and execute the following command:"]}),"\n",(0,a.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"workflow"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"execute"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--file=import.js"})]})})}),"\n",(0,a.jsx)(s.p,{children:"If you are using Docker, you need to increase the storage allocated to Docker to at least 20GB.\nDepending on your machine and internet connection, the process can take up to 30 minutes."}),"\n",(0,a.jsx)(s.h2,{id:"serving-vector-tiles-development-mode",children:"Serving vector tiles (development mode)"}),"\n",(0,a.jsx)(s.p,{children:"To start the server in development mode, run the following command:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"dev"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--tileset"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"tileset.js"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--style"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"style.js"})]})})}),"\n",(0,a.jsx)(s.p,{children:"In this mode, any changes to the style or the tileset will be automatically detected and the web page will be refreshed."}),"\n",(0,a.jsx)(s.h2,{id:"serving-vector-tiles-production-mode",children:"Serving vector tiles (production mode)"}),"\n",(0,a.jsx)(s.p,{children:"To serve the basemap in production mode, run the following command:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"serve"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--tileset"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"tileset.js"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--style"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"style.js"})]})})}),"\n",(0,a.jsx)(s.p,{children:"In this mode, the server will not watch for changes in the style or the tileset\nand additional parameters can be passed to customize the behavior of the server.\nFor instance:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["The ",(0,a.jsx)(s.code,{children:"cache"})," parameter specifies a ",(0,a.jsx)(s.a,{href:"https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.2.2/com/github/benmanes/caffeine/cache/CaffeineSpec.html",children:"caffeine specification"})," for the cache. For instance, ",(0,a.jsx)(s.code,{children:"'maximumWeight=1073741824,expireAfterAccess=1h'"})," will limit the cache to 1GB and will expire the entries after 1 hour."]}),"\n",(0,a.jsxs)(s.li,{children:["The ",(0,a.jsx)(s.code,{children:"--assets"})," parameter specifies the directory where static assets, such as fonts, images, or icons, are stored."]}),"\n",(0,a.jsx)(s.li,{children:"Etc."}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"pregenerating-vector-tiles",children:"Pregenerating vector tiles"}),"\n",(0,a.jsx)(s.p,{children:"It is often useful to pregenerate the vector tiles to avoid the overhead of generating them on the fly. Several formats are supported by baremaps,\nincluding simple export to the filesystem, MBTiles, and PMTiles, and more. To pregenerate the vector tiles, run the following command:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,a.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"export"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--tileset"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"tileset.js"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--repository"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"tiles.pmtiles"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--format"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"pmtiles"})]})})}),"\n",(0,a.jsx)(s.p,{children:"It is important to note that this command will use the bounds and zoom levels defined in the tileset to generate the tiles."})]})}s.default=(0,n.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)},pageOpts:{filePath:"src/pages/documentation/getting-started.mdx",route:"/documentation/getting-started",frontMatter:{layout:"default",title:"Getting Started"},headings:[{depth:1,value:"Getting started",id:"getting-started"},{depth:2,value:"Installing PostGIS",id:"installing-postgis"},{depth:2,value:"Installing the CLI",id:"installing-the-cli"},{depth:2,value:"Preparing the database",id:"preparing-the-database"},{depth:2,value:"Serving vector tiles (development mode)",id:"serving-vector-tiles-development-mode"},{depth:2,value:"Serving vector tiles (production mode)",id:"serving-vector-tiles-production-mode"},{depth:2,value:"Pregenerating vector tiles",id:"pregenerating-vector-tiles"}],title:"Getting Started"},pageNextRoute:"/documentation/getting-started"})}},function(e){e.O(0,[976,644,319,673,774,888,179],function(){return e(e.s=4803)}),_N_E=e.O()}]);