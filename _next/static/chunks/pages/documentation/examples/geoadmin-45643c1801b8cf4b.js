(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{6122:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/examples/geoadmin",function(){return n(8197)}])},8197:function(e,s,n){"use strict";n.r(s);var a=n(5893),t=n(4319),i=n(1151);function r(e){let s=Object.assign({h1:"h1",p:"p",a:"a",pre:"pre",code:"code",span:"span"},(0,i.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{children:"Geoadmin noise exposure in vector tiles"}),"\n",(0,a.jsxs)(s.p,{children:["The Federal Office for the Environment (FOEN) provides a GeoTiff describing the ",(0,a.jsx)(s.a,{href:"https://www.bafu.admin.ch/bafu/de/home/zustand/daten/geodaten/laerm--geodaten.html",children:"traffic noise levels"})," in Switzerland.\nDownload an uncompress the archive that contains the GeoTiff."]}),"\n",(0,a.jsx)(s.p,{children:"If needed, you can now reproject the geotiff in the desired projection before importing it in the database.\nStart by reprojecting the geotiff (EPSG:2056) from LV95 to WebMercator (EPSG:3857)"}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"gdalwarp -rc \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -s_srs epsg:2056 -t_srs epsg:3857 \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -dstnodata 0 -of GTiff -co tiled=yes \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  StrassenLaerm_Tag_LV95.tif \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  StrassenLaerm_Tag_LV95-3857.tif"})})]})}),"\n",(0,a.jsxs)(s.p,{children:["You can now import any GeoTiff DEM as contours in postgis.\nHere, the ",(0,a.jsx)(s.code,{children:"-nln"})," argument name the table that contains the data,\nthe ",(0,a.jsx)(s.code,{children:"-a"})," argument name the column that contains the elevation,\nthe ",(0,a.jsx)(s.code,{children:"-i"})," argument specifies the interval in meters at which contours are generated."]}),"\n",(0,a.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"gdal_polygonize.py \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  StrassenLaerm_Tag_LV95-3857.tif \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  -f PostgreSQL \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "PG:host=localhost user=baremaps password=baremaps dbname=baremaps" \\'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  geoadmin_traffic_noise_day"})})]})}),"\n",(0,a.jsxs)(s.p,{children:["The following index can now be created to improve performances.\nWhen available, a smoothing function such as ",(0,a.jsx)(s.code,{children:"ST_ChaikinSmoothing"})," can be used to improve rendering."]}),"\n",(0,a.jsx)(s.pre,{"data-language":"postgresql","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"postgresql","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"DROP INDEX IF EXISTS geoadmin_traffic_noise_day_gix;"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"CREATE INDEX CONCURRENTLY IF NOT EXISTS geoadmin_traffic_noise_day_gix ON geoadmin_traffic_noise_day USING SPGIST(wkb_geometry);"})})]})}),"\n",(0,a.jsx)(s.p,{children:"To preview and edit the map in the browser, run the tile server with the following command:"}),"\n",(0,a.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"dev"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--database"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--config"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'tileset.json'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--style"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'style.json'"})]})]})})]})}n(5675),s.default=(0,t.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(r,{...e})}):r(e)},pageOpts:{filePath:"src/pages/documentation/examples/geoadmin.mdx",route:"/documentation/examples/geoadmin",frontMatter:{layout:"default",title:"Geoadmin Noise Exposure in Vector Tiles"},headings:[{depth:1,value:"Geoadmin noise exposure in vector tiles",id:"geoadmin-noise-exposure-in-vector-tiles"}],title:"Geoadmin Noise Exposure in Vector Tiles"},pageNextRoute:"/documentation/examples/geoadmin"})}},function(e){e.O(0,[319,774,888,179],function(){return e(e.s=6122)}),_N_E=e.O()}]);