(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{683:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/additional-examples/geoadmin",function(){return n(241)}])},241:function(e,s,n){"use strict";n.r(s);var r=n(5893),o=n(4319),i=n(1151);function l(e){let s=Object.assign({h1:"h1",p:"p",a:"a",pre:"pre",code:"code",span:"span"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Geoadmin noise exposure in vector tiles"}),"\n",(0,r.jsxs)(s.p,{children:["The Federal Office for the Environment (FOEN) provides a GeoTiff describing the ",(0,r.jsx)(s.a,{href:"https://www.bafu.admin.ch/bafu/de/home/zustand/daten/geodaten/laerm--geodaten.html",children:"traffic noise levels"})," in Switzerland.\nDownload an uncompress the archive that contains the GeoTiff."]}),"\n",(0,r.jsx)(s.p,{children:"If needed, you can now reproject the geotiff in the desired projection before importing it in the database.\nStart by reprojecting the geotiff (EPSG:2056) from LV95 to WebMercator (EPSG:3857)"}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"gdalwarp "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-rc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-s_srs"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"epsg:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2056"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-t_srs"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"epsg:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3857"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-dstnodata"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-of"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"GTiff"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-co"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"tiled=yes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"StrassenLaerm_Tag_LV95.tif"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"StrassenLaerm_Tag_LV95-3857.tif"})]})]})}),"\n",(0,r.jsxs)(s.p,{children:["You can now import any GeoTiff DEM as contours in postgis.\nHere, the ",(0,r.jsx)(s.code,{children:"-nln"})," argument name the table that contains the data,\nthe ",(0,r.jsx)(s.code,{children:"-a"})," argument name the column that contains the elevation,\nthe ",(0,r.jsx)(s.code,{children:"-i"})," argument specifies the interval in meters at which contours are generated."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"gdal_polygonize.py \\"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"StrassenLaerm_Tag_LV95-3857.tif"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-f"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"PostgreSQL"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"PG:host=localhost user=baremaps password=baremaps dbname=baremaps"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"geoadmin_traffic_noise_day"})]})]})}),"\n",(0,r.jsxs)(s.p,{children:["The following index can now be created to improve performances.\nWhen available, a smoothing function such as ",(0,r.jsx)(s.code,{children:"ST_ChaikinSmoothing"})," can be used to improve rendering."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"DROP"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INDEX"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"IF"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"EXISTS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geoadmin_traffic_noise_day_gix;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INDEX"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CONCURRENTLY"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"IF"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"NOT"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"EXISTS"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geoadmin_traffic_noise_day_gix "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" geoadmin_traffic_noise_day "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"USING"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" SPGIST(wkb_geometry);"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"To preview and edit the map in the browser, run the tile server with the following command:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"dev"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--database"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--config"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'tileset.json'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--style"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'style.json'"})]})]})})]})}n(5675),s.default=(0,o.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)},pageOpts:{filePath:"src/pages/documentation/additional-examples/geoadmin.mdx",route:"/documentation/additional-examples/geoadmin",frontMatter:{layout:"default",title:"Geoadmin Noise Exposure in Vector Tiles"},headings:[{depth:1,value:"Geoadmin noise exposure in vector tiles",id:"geoadmin-noise-exposure-in-vector-tiles"}],title:"Geoadmin Noise Exposure in Vector Tiles"},pageNextRoute:"/documentation/additional-examples/geoadmin"})}},function(e){e.O(0,[319,774,888,179],function(){return e(e.s=683)}),_N_E=e.O()}]);