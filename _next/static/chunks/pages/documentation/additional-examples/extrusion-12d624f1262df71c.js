(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{5448:function(s,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/documentation/additional-examples/extrusion",function(){return n(7904)}])},7904:function(s,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var i=n(5893),l=n(4319),r=n(1151),o=n(5675),t=n.n(o),a={src:"/_next/static/media/extrusion.9934b529.png",height:887,width:1392,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAoUlEQVR42gUASwqCQHRu7kHEVa4UISQk3AoSgi0SM/+a/8xCHRptxl4gjLFACEm8IHOSvHazonUdL3W6/p3kRSOg7N4ae80EXtThoFvA745gnQOglEHVDAbqnrN+sn0QFWNVNJte3IiSZVnZtoFzK3Q0YWJ+CIWqHSEtXuBFD6DsB4xt4IW1ieK04sKkVK9hK+VlL/txLffDKH3XRZ3mmfsDi9OKz/1v2TMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5};function c(s){let e=Object.assign({h1:"h1",p:"p",a:"a",pre:"pre",code:"code",span:"span",h2:"h2"},(0,r.ah)(),s.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{children:"Extrusion of vector tiles from OSM data"}),"\n",(0,i.jsxs)(e.p,{children:["This example builds upon the ",(0,i.jsx)(e.a,{href:"/documentation/additional-examples/import-osm-into-postgis/",children:"OpenStreetMap example"})," and shows how 3d\nbuildings can be extruded with Maplibre. First, start by downloading the OSM data for London in the current directory."]}),"\n",(0,i.jsx)(e.p,{children:"To import London data in the database."}),"\n",(0,i.jsx)(e.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(e.code,{"data-language":"bash","data-theme":"default",children:[(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"examples/extrusion"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"workflow"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"execute"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"--file"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"workflow.json"})]})]})}),"\n",(0,i.jsxs)(e.p,{children:["In the ",(0,i.jsx)(e.a,{href:"https://raw.githubusercontent.com/apache/incubator-baremaps/main/additional-examples/extrusion/tileset.json",children:"tileset.json"}),"\nfile, notice the SQL query associated with the building layer. Here, the number of levels stored in OSM is multiplied by\n3, which roughly corresponds to the height of a level in meters."]}),"\n",(0,i.jsx)(e.pre,{"data-language":"sql","data-theme":"default",children:(0,i.jsxs)(e.code,{"data-language":"sql","data-theme":"default",children:[(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" id,"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"       tags "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"||"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" jsonb_build_object("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'building:height'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:", ("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"CASE"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                                                          "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHEN"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" tags "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"->>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'building:levels'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ~ "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'^[0-9\\\\.]+$'"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                                                              "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"THEN"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" tags "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"->>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'building:levels'"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                                                          "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"ELSE"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'1'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"END"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")::"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"real"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"),"})]}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"       geom"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" osm_ways"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" tags ? "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'building'"})]})]})}),"\n",(0,i.jsxs)(e.p,{children:["This property is then used in\nthe ",(0,i.jsx)(e.a,{href:"https://raw.githubusercontent.com/apache/incubator-baremaps/main/additional-examples/extrusion/style.json",children:"style.json"})," file to\nextrude the buildings."]}),"\n",(0,i.jsx)(e.pre,{"data-language":"json","data-theme":"default",children:(0,i.jsxs)(e.code,{"data-language":"json","data-theme":"default",children:[(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  ..."})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"layers"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"id"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"building"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"type"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"fill-extrusion"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"source"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"baremaps"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"source-layer"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"building"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"paint"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"fill-extrusion-color"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"rgb(152, 174, 221)"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"fill-extrusion-height"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"get"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"          "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"building:height"'})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        ]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"fill-extrusion-base"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:'"fill-extrusion-opacity"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0.9"})]}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      }"})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  ]"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  ..."})}),"\n",(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,i.jsxs)(e.p,{children:["To preview this example, start the tile viewer. Here, the cache directive is\na ",(0,i.jsx)(e.a,{href:"https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.2.2/com/github/benmanes/caffeine/cache/CaffeineSpec.html",children:"caffeine specification"}),"\nfor a 100MB tile cache."]}),"\n",(0,i.jsx)(e.pre,{"data-language":"shell","data-theme":"default",children:(0,i.jsxs)(e.code,{"data-language":"shell","data-theme":"default",children:[(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"baremaps "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"map"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"dev"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"--tileset"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'tileset.json'"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"--style"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'style.json'"})]})]})}),"\n",(0,i.jsxs)(e.p,{children:["Well done, a map of London with extruded buildings should now appear in your browser (",(0,i.jsx)(e.code,{children:"http://localhost:9000/"}),")!"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(t(),{alt:"Tile viewer",placeholder:"blur",src:a})}),"\n",(0,i.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(e.p,{children:"In this tutorial, we learnt how to import OSM data in PostGIS with a workflow and then use the MVT specification to extrude the vector tiles into a 3d object."})]})}var h=(0,l.j)({MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.ah)(),s.components);return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(c,{...s})}):c(s)},pageOpts:{filePath:"src/pages/documentation/additional-examples/extrusion.mdx",route:"/documentation/additional-examples/extrusion",frontMatter:{layout:"default",title:"Extrusion of vector tiles from OSM data"},headings:[{depth:1,value:"Extrusion of vector tiles from OSM data",id:"extrusion-of-vector-tiles-from-osm-data"},{depth:2,value:"Conclusion",id:"conclusion"}],title:"Extrusion of vector tiles from OSM data"},pageNextRoute:"/documentation/additional-examples/extrusion"})}},function(s){s.O(0,[319,774,888,179],function(){return s(s.s=5448)}),_N_E=s.O()}]);